<div class="busy-container">

  <form #mainForm="ngForm" (ngSubmit)="onSubmit(mainForm)">

    <!-- ================= LOGIN ================= -->
    <div class="login-box" *ngIf="!showRegister">

      <div class="login-title">Welcome to Busy</div>

      <!-- User Type -->
      <div class="form-row">
        <label>User Type</label>
        <select
          name="loginUserType"
          [(ngModel)]="loginUserType"
          required
          #ut="ngModel">
          <option value="" disabled>Select User Type</option>
          <option value="admin">Admin</option>
          <option value="user">User</option>
          <option value="subuser">Sub User</option>
        </select>

        <small class="error" *ngIf="ut.invalid && ut.touched">
          User Type is required
        </small>
      </div>

      <!-- Email -->
      <div class="form-row">
        <label>Email ID</label>
        <input
          type="email"
          name="loginEmail"
          [(ngModel)]="loginEmail"
          required
          email
          #le="ngModel">

        <small class="error" *ngIf="le.errors?.['required'] && le.touched">
          Email is required
        </small>
        <small class="error" *ngIf="le.errors?.['email'] && le.touched">
          Enter valid email
        </small>
      </div>

      <!-- Password -->
      <div class="form-row">
        <label>Password</label>
        <input
          type="password"
          name="loginPassword"
          [(ngModel)]="loginPassword"
          required
          minlength="6"
          #lp="ngModel">

        <small class="error" *ngIf="lp.errors?.['required'] && lp.touched">
          Password is required
        </small>
        <small class="error" *ngIf="lp.errors?.['minlength'] && lp.touched">
          Minimum 6 characters required
        </small>
      </div>

      <div class="actions">
        <button class="btn" type="submit" [disabled]="mainForm.invalid">
          Login
        </button>
      </div>

      <div class="links">
        <a class="link" (click)="openRegister()">First Time? Register</a>
      </div>

    </div>

    <!-- ================= REGISTER ================= -->
    <div class="register-box" *ngIf="showRegister">

      <div class="register-title">Register - First Time</div>

      <!-- User Type -->
      <div class="form-row">
        <label>User Type</label>
        <select
          name="registerUserType"
          [(ngModel)]="registerUserType"
          required
          #rut="ngModel">
          <option value="">Select User Type</option>
          <option value="admin">Admin</option>
          <option value="user">User</option>
          <option value="subuser">Sub User</option>
        </select>

        <small class="error" *ngIf="rut.invalid && rut.touched">
          User Type is required
        </small>
      </div>

      <!-- First Name -->
      <div class="form-row">
        <label>First Name</label>
        <input type="text" name="firstName" [(ngModel)]="firstName" required #fn="ngModel">
        <small class="error" *ngIf="fn.invalid && fn.touched">First Name is required</small>
      </div>

      <!-- Last Name -->
      <div class="form-row">
        <label>Last Name</label>
        <input type="text" name="lastName" [(ngModel)]="lastName" required #ln="ngModel">
        <small class="error" *ngIf="ln.invalid && ln.touched">Last Name is required</small>
      </div>

      <!-- Email -->
      <div class="form-row">
        <label>Email</label>
        <input type="email" name="regEmail" [(ngModel)]="regEmail" required email #re="ngModel">
        <small class="error" *ngIf="re.invalid && re.touched">Valid email required</small>
      </div>

      <!-- Mobile -->
      <div class="form-row">
        <label>Mobile</label>
        <input
          type="text"
          name="mobile"
          [(ngModel)]="mobile"
          required
          pattern="^[0-9]{10}$"
          #mob="ngModel">
        <small class="error" *ngIf="mob.invalid && mob.touched">
          10 digit mobile number required
        </small>
      </div>

      <!-- Company -->
      <div class="form-row">
        <label>Company Name</label>
        <input type="text" name="company" [(ngModel)]="company" required>
      </div>

      <!-- Address -->
      <div class="form-row">
        <label>Address</label>
        <input type="text" name="address" [(ngModel)]="address" required>
      </div>

      <!-- Country -->
      <div class="form-row">
        <label>Country</label>
        <input type="text" name="country" [(ngModel)]="country" required>
      </div>

      <!-- State -->
      <div class="form-row">
        <label>State</label>
        <input type="text" name="state" [(ngModel)]="state" required>
      </div>

      <!-- District -->
      <div class="form-row">
        <label>District</label>
        <input type="text" name="district" [(ngModel)]="district" required>
      </div>

      <!-- Password -->
      <div class="form-row">
        <label>Password</label>
        <input
          type="password"
          name="registerPassword"
          [(ngModel)]="registerPassword"
          required
          minlength="6"
          #pw="ngModel">

        <small class="error" *ngIf="pw.errors?.['required'] && pw.touched">
          Password is required
        </small>
        <small class="error" *ngIf="pw.errors?.['minlength'] && pw.touched">
          Minimum 6 characters required
        </small>
      </div>

      <!-- Confirm Password -->
      <div class="form-row">
        <label>Re-Type Password</label>
        <input
          type="password"
          name="registerRePassword"
          [(ngModel)]="registerRePassword"
          required
          #cp="ngModel">

        <small class="error" *ngIf="cp.invalid && cp.touched">
          Confirm password required
        </small>

        <small
          class="error"
          *ngIf="registerPassword && registerRePassword && registerPassword !== registerRePassword">
          Passwords do not match
        </small>
      </div>

      <!-- OTP -->
      <div class="form-row">
        <label>OTP</label>
        <input type="text" name="otp" [(ngModel)]="otp" required>
      </div>

      <div class="actions">
        <button
          class="btn"
          type="submit"
          [disabled]="mainForm.invalid || registerPassword !== registerRePassword">
          Create
        </button>
      </div>

      <div class="links">
        <a class="link" (click)="closeRegister()">Back to Login</a>
      </div>

    </div>

  </form>
</div>
